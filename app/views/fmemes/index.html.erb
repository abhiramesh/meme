<%= content_for :head do %>
	<%= javascript_include_tag 'jquery.infinitescroll.min.js' %>
<% end %>

<% if @fmemes != [] %>
	<div id="masonry-container" class="transitions-enabled infinite-scroll clearfix">
		<% @fmemes.all.each do |f| %>
		    <div class="box col2">
				<%= link_to image_tag(f.url), show_meme_path(f.id) %>
			</div>
		<% end %>
	</div>
	<div class="container" align="center">
		<div class="container" id="nav" align="center" style="display:none"><%= will_paginate @myfriendphotos %></div>
	</div>
<% else %>
<div align="center">
	<h2>You haven't made any memes yet!<h2/>
	<h1>Go make one <%= link_to "here!", all_photos_path %> :)</h1>
</div>
<% end %>


<script type="text/javascript">
$(document).ready(function(){
      var $container = $('#masonry-container');
      $container.imagesLoaded( function(){
        $container.masonry({
          itemSelector: '.box',
          gutterWidth: 0,
          isResizable: true,
          columnWidth: function( containerWidth ) {
	    	return 226;
		  }
        });
      });

      $container.infinitescroll({
        navSelector  : "div.pagination",            
        nextSelector : "div.pagination a:first",    
        itemSelector : "div.box",       
        animate: true,
        extraScrollPx: 50,
        bufferPx : 250
       },
	       	function( newElements ) {
	       		var $newElems = $( newElements ).css({ opacity: 0 });
	       		$newElems.imagesLoaded(function(){
	       			$newElems.animate({ opacity: 1 });
	       			$container.masonry( 'appended', $newElems, true);
	       		});
	       	}
       	);
});
</script>
